@model TAT001.Entities.DOCUMENTO

@{
    //ViewBag.Title = "Páginas";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.pagina_r = 201;
    ViewBag.carpeta_r = 200;
}
<div class="row" style="margin-bottom:0">
    <div class="col s12 m5 l5">
        <div class="row" style="margin-bottom:0">
            <div class="input-field col s4">
                @Html.EditorFor(model => model.USUARIOC_ID, new { htmlAttributes = new { @disabled = "disabled" } })
                @Html.LabelFor(model => model.USUARIOC_ID, new { @id = "lbl_userid" })
            </div>
            <div class="input-field col s4">
                @*<input type="text" id="txt_user" value="@ViewBag.usuario.MANAGER" disabled="disabled" />
                    <label for="txt_user">Manager</label>*@
                @Html.EditorFor(model => model.USUARIO.MANAGER, new { htmlAttributes = new { @disabled = "disabled" } })
                @Html.LabelFor(model => model.USUARIO.MANAGER, new { @id = "lbl_manager" })
            </div>
            <div class="input-field col s4">
                @Html.EditorFor(model => model.USUARIO.BACKUP_ID, new { htmlAttributes = new { @disabled = "disabled" } })
                @Html.LabelFor(model => model.USUARIO.BACKUP_ID, new { @id = "lbl_backup" })
                @*<input type="text" id="txt_user" value="@ViewBag.usuario.BACKUP_ID" disabled="disabled" />
                    <label for="txt_user">Backup</label>*@
            </div>
        </div>
    </div>
    <div class="col s12 m2 l2">
        <div class="input-field col s6">
            @*<input type="text" id="txt_user" value="PRGA" disabled="disabled" />
                <label for="txt_user">BU</label>*@
            @Html.EditorFor(model => model.USUARIO.BUNIT, new { htmlAttributes = new { @disabled = "disabled" } })
            @Html.LabelFor(model => model.USUARIO.BUNIT, new { @id = "lbl_bu" })
        </div>
        <div class="input-field col s6">
            @if (Model.ESTATUS == "N")
            {
                <input type="text" id="txt_status" value="Nuevo" disabled="disabled" />
                <label for="txt_status" id="lbl_status">Estatus</label>
            }
        </div>
    </div>
    <div class="col s12 m5 l5">
        <div class="row right">
            @if (ViewBag.acciones != null & ViewBag.accion == "A")
            {
                @*<button type="button" class="btn-small" id="btn_workf">Acciones</button>*@
                <div class="fixed-action-btn" id="lbl_wf">
                    <a class="btn-floating btn-large blue">
                        <i class="large material-icons">work</i>
                    </a>
                    <ul>
                        <li><a id="lbl_wfa" class="btn-floating green" href="@Url.Action("Procesa","Flujos",new { id = Model.NUM_DOC, accion="A" })"><i class="material-icons">check</i></a></li>
                        <li><a id="lbl_wfr" class="btn-floating red" href="@Url.Action("Procesa","Flujos",new { id = Model.NUM_DOC, accion="R" })"><i class="material-icons">close</i></a></li>
                    </ul>
                </div>
                <script>

                    var elem = document.querySelector('.fixed-action-btn');
                    var options = {
                        direction: 'left',
                        hoverEnabled: false,
                        toolbarEnabled: false
                    };
                    var instance = M.FloatingActionButton.init(elem, options);
                </script>
            }
            <button type="button" class="btn-small" data-target="list_carta" id="btn_carta">Carta</button>
            <button type="button" class="btn-small" id="btn_cancel">Cancelar</button>
            <ul id='list_carta' class='dropdown-content'>
                <li><a href="@Url.Action("Index", "CartaF", new { id = Model.NUM_DOC })" id="lbl_list">Ver cartas</a></li>
                @if (Model.DOCUMENTOPs.Count().Equals(0))
                {
                    <li><a href="@Url.Action("Create", "CartaF", new { id = Model.NUM_DOC })" id="lbl_genc">Generar carta</a></li>
                }
            </ul>
            <script>
                var elem = document.getElementById('btn_carta');
                var options = {
                    constrainWidth: false
                    //,hover: true
                };
                var instance = M.Dropdown.init(elem, options);
            </script>
        </div>
    </div>
</div>
<div class="row">
    <div class="col s12">
        <ul class="tabs" id="tab">
            <li class="tab col s2"><a class="active" href="#info" id="lbl_info">Información</a></li>
            <li class="tab col s2"><a href="#temp" id="lbl_temp">Temporalidad</a></li>
            <li class="tab col s2"><a href="#supp" id="lbl_supp">Soporte</a></li>
            <li class="tab col s2"><a href="#fina" id="lbl_fina">Financiera</a></li>
            @*<li class="tab col s2"><a href="#dist" id="lbl_dist">Distribución</a></li>*@
        </ul>
    </div>
    <div id="info" class="col s12" style="font-size:12px;">
        <div class="row">
            <div class="col s12 m6 l6">
                <div class="card-panel">
                    <div class="row" style="margin-bottom:0">
                        @*<div class="input-field col s12">
                                @Html.EditorFor(model => model.NUM_DOC, new { htmlAttributes = new { @disabled = "disabled" } })
                                @Html.LabelFor(model => model.NUM_DOC)
                            </div>*@
                        <div class="input-field col s12">
                            @Html.EditorFor(model => model.TSOL.TSOLTs.Where(a => a.SPRAS_ID.Equals(model.USUARIO.SPRAS_ID)).FirstOrDefault().TXT020, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.TSOL, "Tipo de solicitud", new { @id = "lbl_tsol" })
                        </div>
                        <div class="input-field col s12">
                            @Html.EditorFor(model => model.TALL.TALLTs.Where(a => a.SPRAS_ID.Equals(model.USUARIO.SPRAS_ID)).FirstOrDefault().TXT50, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.TALL, "Tipo de allowance", new { @id = "lbl_tall" })
                        </div>
                    </div>
                </div>
                <div class="card-panel">
                    <h5>Datos país</h5>
                    <div class="row" style="margin-bottom:0">

                        <div class="input-field col s6">
                            @Html.EditorFor(model => model.SOCIEDAD_ID, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.SOCIEDAD, "Sociedad", new { @id = "lbl_bukrs" })
                        </div>
                        <div class="input-field col s6">
                            @Html.EditorFor(model => model.PAIS_ID, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.PAIS_ID, "País", new { @id = "lbl_land" })
                        </div>
                        <div class="input-field col s6">
                            @Html.EditorFor(model => model.CIUDAD, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.CIUDAD, "Ciudad", new { @id = "lbl_city" })
                        </div>
                        <div class="input-field col s6">
                            @Html.EditorFor(model => model.ESTADO, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.ESTADO, "Estado", new { @id = "lbl_state" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="col s12 m6 l6">
                <div class="row" style="margin-bottom:0">
                    <div class="card-panel">
                        <div class="row" style="margin-bottom:0">
                            <h5>Información general</h5>
                            <div class="input-field col s12">
                                @Html.EditorFor(model => model.FECHAC, new { htmlAttributes = new { @disabled = "disabled", @type = "text" } })
                                @Html.LabelFor(model => model.FECHAC, "Fecha", new { @id = "lbl_fechac" })
                            </div>
                            <div class="input-field col s6 l6">
                                @Html.EditorFor(model => model.PERIODO, new { htmlAttributes = new { @disabled = "disabled", @type = "text" } })
                                @Html.LabelFor(model => model.PERIODO, "Periodo", new { @id = "lbl_periodo" })
                            </div>
                            <div class="input-field col s6">
                                @Html.EditorFor(model => model.EJERCICIO, new { htmlAttributes = new { @disabled = "disabled", @type = "text" } })
                                @Html.LabelFor(model => model.EJERCICIO, "Ejercicio", new { @id = "lbl_ejer" })
                            </div>
                            <div class="input-field col s12">
                                @Html.EditorFor(model => model.CONCEPTO, new { htmlAttributes = new { @disabled = "disabled" } })
                                @Html.LabelFor(model => model.CONCEPTO, "Concepto", new { @id = "lbl_conce" })
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-bottom:0">
                    <div class="card-panel">
                        <h5>Cliente @Html.DisplayFor(model => model.CLIENTE.KUNNR)</h5>
                        <div class="row" style="margin-bottom:0">
                            @*<div class="input-field col s12">
                                    @Html.EditorFor(model => model.CLIENTE.KUNNR, new { htmlAttributes = new { @disabled = "disabled" } })
                                    @Html.LabelFor(model => model.CLIENTE.KUNNR)
                                </div>*@
                            <div class="input-field col s12">
                                @Html.EditorFor(model => model.CLIENTE.NAME1, new { htmlAttributes = new { @disabled = "disabled" } })
                                @Html.LabelFor(model => model.CLIENTE.NAME1, "Nombre", new { @id = "lbl_name" })
                            </div>
                            <div class="input-field col s12">
                                @Html.EditorFor(model => model.CLIENTE.STCD1, new { htmlAttributes = new { @disabled = "disabled" } })
                                @Html.LabelFor(model => model.CLIENTE.STCD1, "Taxid", new { @id = "lbl_stcd1" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="temp" class="col s12">
        <div class="row">
            <div class="card-panel">
                <div class="row" style="margin-bottom:0">
                    <h5>Vigencia</h5>
                    @*<div class="input-field col s12">
                            @Html.EditorFor(model => model.NUM_DOC, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.NUM_DOC)
                        </div>*@
                    <div class="input-field col s6">
                        @Html.EditorFor(model => model.FECHAI_VIG, new { htmlAttributes = new { @disabled = "disabled", @type = "text" } })
                        @Html.LabelFor(model => model.FECHAI_VIG, "De", new { @id = "lbl_fechai" })
                    </div>
                    <div class="input-field col s6">
                        @Html.EditorFor(model => model.FECHAF_VIG, new { htmlAttributes = new { @disabled = "disabled", @type = "text" } })
                        @Html.LabelFor(model => model.FECHAF_VIG, "A", new { @id = "lbl_fechaf" })
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="supp" class="col s12"></div>
    <div id="fina" class="col s12">
        <div class="row">
            <div class="col s12 m6 l6">
                <div class="card-panel">
                    <div class="row" style="margin-bottom:0">
                        <div class="input-field col s8">
                            @if (ViewBag.accion == "N")
                            {
                                @Html.EditorFor(model => model.MONTO_DOC_MD)
                            }
                            @Html.EditorFor(model => model.MONTO_DOC_MD, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.MONTO_DOC_MD, "Monto", new { @id = "lbl_montomd" })
                        </div>
                        <div class="input-field col s4">
                            @Html.EditorFor(model => model.MONEDA_ID, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.MONEDA_ID, "Moneda", new { @id = "lbl_waers" })
                        </div>
                        <div class="input-field col s6">
                            @Html.EditorFor(model => model.TIPO_CAMBIO, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.TIPO_CAMBIO, "Tipo de cambio", new { @id = "lbl_tcambio" })
                        </div>
                        <div class="input-field col s6">
                            @Html.EditorFor(model => model.MONTO_DOC_ML, new { htmlAttributes = new { @disabled = "disabled" } })
                            @Html.LabelFor(model => model.MONTO_DOC_ML, "Estado", new { @id = "lbl_state" })
                        </div>
                        <div class="input-field col s12">
                            @Html.TextAreaFor(model => model.NOTAS, new { @disabled = "disabled", @class = "materialize-textarea" })
                            @Html.LabelFor(model => model.NOTAS, "Notas", new { @id = "lbl_state" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="col s12 m6 l6">
                <div class="card-panel">
                    <div class="row" style="margin-bottom:0">
                        <h5>Análisis presupuesto</h5>
                        <p>Presupuesto canal: 25,000.00</p>
                        <h5>Análisis solicitud</h5>
                        <p>importe Solicitud</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @*<div id="dist" class="col s12">Test 4</div>*@
</div>
<script>
    var el = document.getElementById("tab");
    options = [];
    var instance = M.Tabs.init(el, options);
</script>

@if (ViewBag.workflow.Count != 0)
{
    <div class="row" style="font-size:12px;">
        <div class="col s12">
            <div class="row" style="margin-bottom:0">
                <div class="card-panel">
                    <h5>Workflow</h5>
                    @*<script src="//code.jquery.com/jquery-1.12.4.js"></script>
                        <script src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
                        <script src="//cdn.datatables.net/1.10.16/js/dataTables.material.min.js"></script>
                        <link href="~/Content/dataTable.css" rel="stylesheet" />
                        <link href="//cdn.datatables.net/1.10.16/css/dataTables.material.min.css" rel="stylesheet" />*@
                    <table class="table highlight" id="table">
                        <thead>
                            <tr>
                                <th width="">Usuario</th>
                                <th width="">Evento</th>
                                <th width="">Fecha</th>
                                <th width="">Fecha Procesada</th>
                                <th width="">Estatus</th>
                                <th width="30%">Comentario</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (TAT001.Entities.FLUJO f in ViewBag.workflow)
                            {
                                <tr>
                                    <td width="">@Html.DisplayFor(modelItem => f.USUARIOA_ID) - @Html.DisplayFor(modelItem => f.USUARIO.NOMBRE) @Html.DisplayFor(modelItem => f.USUARIO.APELLIDO_P) @Html.DisplayFor(modelItem => f.USUARIO.APELLIDO_M)</td>
                                    <td width="">@Html.DisplayFor(modelItem => f.WORKFP.ACCION.DESCCRIPCION)</td>
                                    <td width="">@Html.DisplayFor(modelItem => f.FECHAC)</td>
                                    <td width="">@Html.DisplayFor(modelItem => f.FECHAM)</td>
                                    <td width="">@Html.DisplayFor(modelItem => f.ESTATUS)</td>
                                    <td width="30%">@Html.DisplayFor(modelItem => f.COMENTARIO)</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
}
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.NUM_DOC }) |
    @Html.ActionLink("Back to List", "Index")
</p>
